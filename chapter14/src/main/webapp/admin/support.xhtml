<!DOCTYPE html>
<HTML
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/WEB-INF/template.xhtml">
        <ui:define name="content">
        <h:form>
            <h:outputScript library="js" name="jquery-1.10.2.js" />
            <h:outputScript library="js" name="chat.js" />
            <h:outputScript library="js" name="bulletin.js"/>
            <h:outputStylesheet library="css" name="site.css"/>
            <script>
                var chat;
                var bulletin;
                $(document).ready(function() {
                    chat = new Chat("support","Awaiting a client.");
                    bulletin = new Bulletin();
                });
                
                function sendFinish() {
                    var message = {"type":"command","command":"closeConversation"};
                    chat.sendCommand(message);
                }
            </script>
            <div>Chat</div>
            <div style="border: black; border-style: solid; border-width: 1px;">
                <div style="display: inline">Support Chat Status</div>
                <div style="display: inline">CSR Online:</div><div id="csrOnline"></div>
                <div style="display: inline">CSR Conversations:</div><div id="csrConversations"></div>
                <div style="display: inline">Users waiting:</div><div id="usersWaiting"></div>
            </div>
            <div id="messagePanel" style="float: left; width:500px; height:300px;">
                <div id="messageWindow" style="width:590px; height:290px; overflow:scroll;"></div>
                <input id="message" size="50" type="text"/>
                <button id="btnSend" onclick="chat.postMessage();" type="button">Send</button>
                <button id="btnClose" onclick="sendFinish();" type="button">End Chat</button>
                <button id="btnClose" onclick="chat.closeWebSocket();" type="button">Quit</button>
            </div>
            <div id="bulletinPanel" style=" overflow:scroll;">
                <div id="bulletinWindow" style="width: 290; height: 290px; overflow: scroll;">
                    
                </div>
            </div>
            <br/>
            
            <br/>
        </h:form>
    </ui:define>
</ui:composition>